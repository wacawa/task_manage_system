<%# javascript_pack_tag 'sessions/new' %>

<div class="modal-dialog modal-lg">
  <div class="modal-content">
    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
      <%# link_to "", root_path, class: "btn-close secondary" %>
      <div class="btn-close secondary back-btn"></div>
    </div>
    <div class="modal-body">
      <div class="row justify-content-md-center">
        <div class="col-10 secondary">
          <div class="col-7 mx-auto login-email">
            <%= form_with(scope: :session, url: email_login_path, local: true) do |f| %>
              <% unless @email.nil? %>
                <ul>
                  <li>認証に失敗しました。</li>
                </ul>
              <% end %>
              <div class="d-grid gap-2">
                <% if @email.blank? %>
                  <%= f.email_field :email, placeholder: "メールアドレス", class: "form-control" %>
                <% else %>
                  <%= f.email_field :email, value: @email, class: "form-control" %>
                <% end %>
                <%= f.password_field :password, placeholder: "パスワード", class: "form-control" %>
                <%= f.submit "送信", class: "btn btn-secondary" %>
              </div>
            <% end %>
          </div>
          <hr>
          <div class="oauth">
            <% if params[:error].present? %>
              <ul>
                <li>認証に失敗しました。</li>
              </ul>
            <% end %>
            <div class="col-6 offset-3 login-line">
              <%# link_to image_tag("btn_line_login.png"), "https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=1656830695
     &redirect_uri=https%3A%2F%2Fapi.line.me%2Foauth2%2Fv2.1%2Ftoken&state=#{SecureRandom.urlsafe_base64}&bot_prompt=normal&scope=openid%20email" %>
              <%# link_to image_tag("btn_line_login.png"), "https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=1656830695
     &redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fauth%2Fline%2Fcallback%3Ferror%3Daccess_denied%26error_description%3DThe%2Bresource%2Bowner%2Bdenied%2Bthe%2Brequest.%26state%3D0987poi&state=#{SecureRandom.urlsafe_base64}&scope=openid%20email" %>
              <%# link_to image_tag("btn_line_login.png"), "https://access.line.me/oauth2/v2.1/authorize?client_id=1656830695&&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fauth%2Fline" %>
              <%= link_to image_tag("btn_line_login.png"), login_line_path, method: :post %>
              <%# link_to image_tag("btn_line_login.png"), "https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=1656830695
     &redirect_uri=https%3A%2F%2F000a-2400-2653-85e2-1900-9ded-b283-2b87-6d8b.ngrok.io%2Fauth%2Fline&state=#{SecureRandom.urlsafe_base64}&scope=openid%20email" %>
            </div>
            <div class="col-6 offset-3 login-google">
              <%= link_to image_tag("btn_google_signin.png"), "/auth/google_oauth2" %>
            </div>
            <p><br>
              ＊GoogleまたはLINEによるログインの際、ご登録のメールアドレスを取得できます。<br>
              ＊取得を許可した場合、作成したタスクを自分宛に送信する際に使用できます。<br>
              ＊当サイトでは、それ以外の目的では利用いたしません。<br>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="d-grid gap-2">
    <%# <div class="d-md-flex"> %>
        <div class="btn btn-outline-secondary back-btn">閉じる</div>
      <%# link_to "閉じる", root_path, class: "btn btn-outline-secondary close-btn" %>
    </div>
  </div>
</div>
