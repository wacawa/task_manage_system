$(".task-modal").html("<%= escape_javascript(render 'new') %>");
$(".task-modal").show();

function cnames(){
  var cnames = [];
  $("tr[class^='form-']").each(function(){
    if($.inArray($(this).attr("class"), cnames) == -1){
      cnames.push($(this).attr("class"));
    }
  })
  return cnames;
}

function minusbtn(){
  if($(".plustr").css("display") == "none"){
    $(".plustr").show();
  }
  $(cnames().reverse()).each(function(i){
    cname = "." + this
    if($(cname).css("display") == "table-row"){
      $(cname).hide();
      if(i == cnames().length - 1){
        $(".minustr").hide();
      }
      return false;
    }
  })
}

function plusbtn(){
  if($(".minustr").css("display") == "none"){
    $(".minustr").show();
  }
  $(cnames()).each(function(i){
    cname = "." + this
    if($(cname).css("display") == "none"){
      $(cname).show();
      if(i == cnames().length - 1){
        $(".plustr").hide();
      }
      return false;
    }
  })
}

$(".form-ftime").on("blur", function(){
  val = $(this).val();
  elem = $(this).parents("tr").nextAll("tr").children().children(".form-stime")[0];
  $(elem).val(val);
})
